{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Meus Condom√≠nios - Portal do S√≠ndico</title>
    <link rel="icon" href="/img/logo.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
        }

        * {
            font-family: 'Plus Jakarta Sans', system-ui, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(-45deg, #6366f1, #8b5cf6, #a5b4fc, #6366f1);
            background-size: 400% 400%;
            animation: gradientBG 20s ease infinite;
            overflow-x: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .header-glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: 0 4px 30px rgba(99, 102, 241, 0.15);
            padding: 0.75rem 1rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-title {
            font-weight: 800;
            font-size: 1.1rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .main-container {
            padding: 1rem;
            min-height: calc(100vh - 60px);
        }

        .page-title {
            color: white;
            font-weight: 800;
            font-size: 1.3rem;
            margin-bottom: 0.3rem;
        }

        .page-subtitle {
            color: rgba(255,255,255,0.85);
            font-size: 0.8rem;
        }

        .condo-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: none;
            border-radius: 16px;
            padding: 1.2rem;
            margin-bottom: 0.8rem;
            box-shadow: 0 8px 32px rgba(99, 102, 241, 0.12);
            transition: all 0.2s ease;
            text-decoration: none;
            display: block;
            color: inherit;
        }

        .condo-card:active {
            transform: scale(0.98);
        }

        .condo-logo {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        .stat-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.25rem 0.5rem;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .stat-badge.primary { background: rgba(99, 102, 241, 0.15); color: #6366f1; }
        .stat-badge.warning { background: rgba(245, 158, 11, 0.15); color: #d97706; }
        .stat-badge.success { background: rgba(16, 185, 129, 0.15); color: #059669; }

        .add-card {
            background: rgba(255, 255, 255, 0.5);
            border: 2px dashed rgba(99, 102, 241, 0.4);
            border-radius: 16px;
            padding: 2rem 1rem;
            text-align: center;
            text-decoration: none;
            display: block;
            transition: all 0.2s;
        }

        .add-card:active {
            transform: scale(0.98);
            background: rgba(255, 255, 255, 0.8);
        }

        .add-card i {
            font-size: 2.5rem;
            color: var(--primary);
        }

        .add-card span {
            color: var(--primary);
            font-weight: 700;
            font-size: 0.9rem;
        }

        .alert {
            border: none;
            border-radius: 12px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header-glass">
        <div class="d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center gap-2">
                <img src="/img/logo.ico" alt="Logo" style="height: 32px; border-radius: 8px;" onerror="this.style.display='none'">
                <span class="header-title">üëî Portal do S√≠ndico</span>
            </div>
            <div class="d-flex align-items-center gap-2">
                <span class="text-muted d-none d-sm-inline" style="font-size: 0.8rem;">{{ sindico.nome|truncatechars:10 }}</span>
                <a href="{% url 'logout' %}" class="btn btn-sm btn-outline-danger rounded-pill px-2 py-1" style="font-size: 0.75rem;">
                    <i class="bi bi-box-arrow-right"></i>
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-container">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show mb-3" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close btn-sm" data-bs-dismiss="alert"></button>
                </div>
            {% endfor %}
        {% endif %}

        <!-- Header da P√°gina -->
        <div class="mb-3">
            <h5 class="page-title">üè¢ Meus Condom√≠nios</h5>
            <p class="page-subtitle">Selecione um condom√≠nio para gerenciar</p>
        </div>

        <!-- Lista de Condom√≠nios -->
        {% for item in condominios_stats %}
        <a href="{% url 'sindico_selecionar' item.condominio.id %}" class="condo-card">
            <div class="d-flex align-items-center gap-3">
                <div class="condo-logo">
                    {% if item.condominio.logo %}
                        <img src="{{ item.condominio.logo.url }}" alt="Logo" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px;">
                    {% else %}
                        üè†
                    {% endif %}
                </div>
                <div class="flex-grow-1">
                    <h6 class="fw-bold mb-1" style="color: #1e293b;">{{ item.condominio.nome }}</h6>
                    <p class="text-muted mb-2" style="font-size: 0.75rem;">
                        <i class="bi bi-geo-alt"></i> {{ item.condominio.endereco|default:"Endere√ßo n√£o informado"|truncatechars:30 }}
                    </p>
                    <div class="d-flex flex-wrap gap-1">
                        <span class="stat-badge primary">
                            <i class="bi bi-people"></i> {{ item.moradores }}
                        </span>
                        {% if item.encomendas_pendentes > 0 %}
                        <span class="stat-badge warning">
                            <i class="bi bi-box"></i> {{ item.encomendas_pendentes }}
                        </span>
                        {% endif %}
                        {% if item.solicitacoes_pendentes > 0 %}
                        <span class="stat-badge success">
                            <i class="bi bi-clipboard"></i> {{ item.solicitacoes_pendentes }}
                        </span>
                        {% endif %}
                    </div>
                </div>
                <i class="bi bi-chevron-right text-muted"></i>
            </div>
        </a>
        {% empty %}
        <div class="condo-card text-center py-4">
            <div style="font-size: 3rem;">üè¢</div>
            <h6 class="fw-bold mt-2">Nenhum condom√≠nio</h6>
            <p class="text-muted small mb-0">Crie seu primeiro condom√≠nio abaixo</p>
        </div>
        {% endfor %}

        <!-- Bot√£o Adicionar -->
        <a href="{% url 'sindico_criar_condominio' %}" class="add-card mt-3">
            <i class="bi bi-plus-circle d-block mb-2"></i>
            <span>Adicionar Condom√≠nio</span>
        </a>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
